$C = "../Common.ui";

$C.@PageOverlay {

  $C.@Container {
    Anchor: (Width: 750, Height: 650);

    #Title {
      $C.@Title {
        @Text = "CATALYST SETTINGS";
      }
    }

    #Content {
      LayoutMode: Top;

      // ===== SCROLLABLE CONTENT =====
      Group {
        LayoutMode: TopScrolling;
        Anchor: (Width: 730, Top: 10, Left: 10, Right: 10, Bottom: 10);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;

        // ===== LAZY LOADING SECTION =====
        Group {
          LayoutMode: Top;
          Padding: (Full: 12, Bottom: 16);
          Background: #1a1d26;

          Label {
            Style: (FontSize: 13, TextColor: #b4c8c9, RenderBold: true, RenderUppercase: true, LetterSpacing: 0.5);
            Text: "Lazy Loading";
            Padding: (Bottom: 10);
          }

          Label {
            Style: (FontSize: 11, TextColor: #6e7da1, Wrap: true);
            Text: "Chunk loading optimizations - defer processing until blocks are accessed.";
            Padding: (Bottom: 12);
          }

          $C.@CheckBoxWithLabel #LazyToggle {
            @Text = "Lazy Block Entities";
          }
          Label {
            Style: (FontSize: 12, TextColor: #96a9be, Wrap: true);
            Text: "Defers chest, furnace, sign creation until accessed. Major chunk load speedup.";
            Padding: (Left: 26, Top: 2, Bottom: 10);
          }

          $C.@CheckBoxWithLabel #TickLazyToggle {
            @Text = "Lazy Block Tick Discovery";
          }
          Label {
            Style: (FontSize: 12, TextColor: #96a9be, Wrap: true);
            Text: "Skips crop/sapling discovery. May delay growth in new chunks.";
            Padding: (Left: 26, Top: 2, Bottom: 10);
          }

          $C.@CheckBoxWithLabel #FluidLazyToggle {
            @Text = "Lazy Fluid Processing";
          }
          Label {
            Style: (FontSize: 12, TextColor: #96a9be, Wrap: true);
            Text: "Skips fluid pre-simulation. Water/lava flows after loading.";
            Padding: (Left: 26, Top: 2, Bottom: 4);
          }
        }

        // ===== RUNTIME OPTIMIZATIONS SECTION =====
        Group {
          LayoutMode: Top;
          Padding: (Full: 12, Bottom: 16);
          Background: #1a1d26;

          Label {
            Style: (FontSize: 13, TextColor: #88ff88, RenderBold: true, RenderUppercase: true, LetterSpacing: 0.5);
            Text: "Runtime Optimizations";
            Padding: (Bottom: 10);
          }

          Label {
            Style: (FontSize: 11, TextColor: #6e7da1, Wrap: true);
            Text: "Adjustable entity sync and chunk loading settings.";
            Padding: (Bottom: 12);
          }

          $C.@CheckBoxWithLabel #EntityDistanceToggle {
            @Text = "Entity View Distance";
          }
          Label {
            Style: (FontSize: 12, TextColor: #96a9be, Wrap: true);
            Text: "Controls entity sync distance multiplier. Lower = less bandwidth.";
            Padding: (Left: 26, Top: 2, Bottom: 6);
          }
          Group {
            LayoutMode: Left;
            Anchor: (Height: 28);
            Padding: (Left: 26, Bottom: 12);

            Label {
              Anchor: (Width: 120);
              Style: (FontSize: 12, TextColor: #88ff88, VerticalAlignment: Center);
              Text: "Multiplier:";
            }
            SliderNumberField #EntityDistanceSlider {
              Anchor: (Width: 240, Height: 5);
              SliderStyle: $C.@DefaultSliderStyle;
              NumberFieldStyle: (...$C.@DefaultInputFieldStyle, RenderBold: true, FontSize: 13, TextColor: #a5b4c4);
              Min: 8;
              Max: 64;
            }
          }

          $C.@CheckBoxWithLabel #ChunkRateToggle {
            @Text = "Chunk Rate Limit";
          }
          Label {
            Style: (FontSize: 12, TextColor: #96a9be, Wrap: true);
            Text: "Chunks sent per tick. Lower = smoother TPS, slower loading.";
            Padding: (Left: 26, Top: 2, Bottom: 6);
          }
          Group {
            LayoutMode: Left;
            Anchor: (Height: 28);
            Padding: (Left: 26, Bottom: 4);

            Label {
              Anchor: (Width: 120);
              Style: (FontSize: 12, TextColor: #88ff88, VerticalAlignment: Center);
              Text: "Chunks/Tick:";
            }
            SliderNumberField #ChunkRateSlider {
              Anchor: (Width: 240, Height: 5);
              SliderStyle: $C.@DefaultSliderStyle;
              NumberFieldStyle: (...$C.@DefaultInputFieldStyle, RenderBold: true, FontSize: 13, TextColor: #a5b4c4);
              Min: 1;
              Max: 16;
            }
          }
        }

        // ===== NPC PATHFINDING SECTION =====
        Group {
          LayoutMode: Top;
          Padding: (Full: 12, Bottom: 16);
          Background: #1a1d26;

          Label {
            Style: (FontSize: 13, TextColor: #ffaa55, RenderBold: true, RenderUppercase: true, LetterSpacing: 0.5);
            Text: "NPC Pathfinding";
            Padding: (Bottom: 10);
          }

          Label {
            Style: (FontSize: 11, TextColor: #6e7da1, Wrap: true);
            Text: "Configure A* pathfinding limits. Lower values reduce CPU but NPCs may get stuck.";
            Padding: (Bottom: 12);
          }

          $C.@CheckBoxWithLabel #PathfindingToggle {
            @Text = "Custom Pathfinding Limits";
          }
          Label {
            Style: (FontSize: 12, TextColor: #96a9be, Wrap: true);
            Text: "Enable custom pathfinding limits instead of vanilla defaults.";
            Padding: (Left: 26, Top: 2, Bottom: 10);
          }

          Group {
            LayoutMode: Left;
            Anchor: (Height: 28);
            Padding: (Left: 26, Bottom: 4);

            Label {
              Anchor: (Width: 130);
              Style: (FontSize: 12, TextColor: #ffaa55, VerticalAlignment: Center);
              Text: "Max Path Length:";
            }
            SliderNumberField #MaxPathLengthSlider {
              Anchor: (Width: 230, Height: 5);
              SliderStyle: $C.@DefaultSliderStyle;
              NumberFieldStyle: (...$C.@DefaultInputFieldStyle, RenderBold: true, FontSize: 13, TextColor: #a5b4c4);
              Min: 50;
              Max: 500;
            }
          }

          Group {
            LayoutMode: Left;
            Anchor: (Height: 28);
            Padding: (Left: 26, Bottom: 4);

            Label {
              Anchor: (Width: 130);
              Style: (FontSize: 12, TextColor: #ffaa55, VerticalAlignment: Center);
              Text: "Open Nodes Limit:";
            }
            SliderNumberField #OpenNodesSlider {
              Anchor: (Width: 230, Height: 5);
              SliderStyle: $C.@DefaultSliderStyle;
              NumberFieldStyle: (...$C.@DefaultInputFieldStyle, RenderBold: true, FontSize: 13, TextColor: #a5b4c4);
              Min: 20;
              Max: 200;
            }
          }

          Group {
            LayoutMode: Left;
            Anchor: (Height: 28);
            Padding: (Left: 26, Bottom: 4);

            Label {
              Anchor: (Width: 130);
              Style: (FontSize: 12, TextColor: #ffaa55, VerticalAlignment: Center);
              Text: "Total Nodes Limit:";
            }
            SliderNumberField #TotalNodesSlider {
              Anchor: (Width: 230, Height: 5);
              SliderStyle: $C.@DefaultSliderStyle;
              NumberFieldStyle: (...$C.@DefaultInputFieldStyle, RenderBold: true, FontSize: 13, TextColor: #a5b4c4);
              Min: 100;
              Max: 1000;
            }
          }
        }

        // ===== LEGEND SECTION =====
        Group {
          LayoutMode: Top;
          Padding: (Full: 12);
          Background: #1a1d26;

          Label {
            Style: (FontSize: 13, TextColor: #b4c8c9, RenderBold: true, RenderUppercase: true, LetterSpacing: 0.5);
            Text: "Legend";
            Padding: (Bottom: 8);
          }

          Group {
            LayoutMode: Left;
            Anchor: (Height: 20);

            Group {
              Anchor: (Width: 12, Height: 12);
              Background: #aaaaaa;
            }
            Label {
              Style: (FontSize: 12, TextColor: #96a9be, VerticalAlignment: Center);
              Text: "Chunk Loading";
              Padding: (Left: 8, Right: 16);
            }

            Group {
              Anchor: (Width: 12, Height: 12);
              Background: #88ff88;
            }
            Label {
              Style: (FontSize: 12, TextColor: #96a9be, VerticalAlignment: Center);
              Text: "Runtime";
              Padding: (Left: 8, Right: 16);
            }

            Group {
              Anchor: (Width: 12, Height: 12);
              Background: #ffaa55;
            }
            Label {
              Style: (FontSize: 12, TextColor: #96a9be, VerticalAlignment: Center);
              Text: "Pathfinding";
              Padding: (Left: 8);
            }
          }
        }
      }

      // ===== RESET BUTTON (FIXED AT BOTTOM) =====
      Group {
        LayoutMode: Center;
        Anchor: (Height: 44);
        Padding: (Top: 8);

        $C.@SecondaryTextButton #ResetButton {
          @Text = "Reset to Defaults";
          @Anchor = Anchor(MinWidth: 200);
        }
      }
    }
  }

  $C.@BackButton {}
}
