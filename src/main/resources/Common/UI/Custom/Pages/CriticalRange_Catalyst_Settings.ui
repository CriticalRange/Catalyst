$C = "../Common.ui";

$C.@PageOverlay {

  $C.@Container {
    Anchor: (Width: 820, Height: 650);

    #Title {
      $C.@Title {
        @Text = "CATALYST SETTINGS";
      }
    }

    #Content {
      LayoutMode: Top;

      // ===== TAB NAVIGATION =====
      Group #TabBar {
        LayoutMode: Left;
        Anchor: (Height: 40);
        Background: #12151c;

        TextButton #TabGeneral {
          Text: "General";
          TooltipText: "Runtime and chunk generation settings";
          Anchor: (Width: 130, Height: 40);
          Background: #2d3444;
          Style: (
            Default: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Hovered: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Pressed: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true))
          );
        }

        TextButton #TabLighting {
          Text: "Lighting";
          TooltipText: "Light propagation and caching optimizations";
          Anchor: (Width: 130, Height: 40);
          Background: #1a1d26;
          Style: (
            Default: (LabelStyle: (FontSize: 14, TextColor: #96a9be, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Hovered: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Pressed: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true))
          );
        }

        TextButton #TabPathfinding {
          Text: "Pathfinding";
          TooltipText: "NPC pathfinding algorithm limits";
          Anchor: (Width: 130, Height: 40);
          Background: #1a1d26;
          Style: (
            Default: (LabelStyle: (FontSize: 14, TextColor: #96a9be, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Hovered: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Pressed: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true))
          );
        }

        TextButton #TabVisual {
          Text: "Visual";
          TooltipText: "Particle and animation toggles";
          Anchor: (Width: 130, Height: 40);
          Background: #1a1d26;
          Style: (
            Default: (LabelStyle: (FontSize: 14, TextColor: #96a9be, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Hovered: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Pressed: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true))
          );
        }

        TextButton #TabAdvanced {
          Text: "Advanced";
          TooltipText: "Debug information and version details";
          Anchor: (Width: 130, Height: 40);
          Background: #1a1d26;
          Style: (
            Default: (LabelStyle: (FontSize: 14, TextColor: #96a9be, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Hovered: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true)),
            Pressed: (LabelStyle: (FontSize: 14, TextColor: #ffffff, VerticalAlignment: Center, HorizontalAlignment: Center, RenderUppercase: true, RenderBold: true))
          );
        }
      }

      // Tab indicator bar
      Group {
        LayoutMode: Left;
        Anchor: (Height: 3);
        Background: #12151c;

        Group #IndicatorGeneral { Anchor: (Width: 130, Height: 3); Background: #55aaff; }
        Group #IndicatorLighting { Anchor: (Width: 130, Height: 3); Background: #12151c; }
        Group #IndicatorPathfinding { Anchor: (Width: 130, Height: 3); Background: #12151c; }
        Group #IndicatorVisual { Anchor: (Width: 130, Height: 3); Background: #12151c; }
        Group #IndicatorAdvanced { Anchor: (Width: 130, Height: 3); Background: #12151c; }
      }

      // ===== PANELS CONTAINER =====
      Group #PanelsContainer {
        FlexWeight: 1;
        Padding: (Top: 8, Left: 10, Right: 10, Bottom: 10);

        // ===== GENERAL TAB =====
        Group #PanelGeneral {
          LayoutMode: TopScrolling;
          Anchor: (Full: 0);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;

        // Runtime Section
        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "Runtime Optimizations"; Padding: (Bottom: 8); }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Controls entity visibility range. Higher values show more entities but increase CPU load (8-64)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Entity View Multiplier"; Anchor: (Width: 200); }
          SliderNumberField #EntityDistanceSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 8; Max: 64; }
        }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Number of chunks processed per server tick. Higher = faster loading but more CPU usage (1-16)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Chunks Per Tick"; Anchor: (Width: 200); }
          SliderNumberField #ChunkRateSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 1; Max: 16; }
        }

        // Chunk Generation Section
        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "Chunk Generation"; Padding: (Top: 16, Bottom: 8); }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Thread priority for chunk generation. Higher = faster generation but may affect other processes (1-10)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Thread Priority (1-10)"; Anchor: (Width: 200); }
          SliderNumberField #ChunkThreadPrioritySlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 1; Max: 10; }
        }
        }

        // ===== LIGHTING TAB =====
        Group #PanelLighting {
          LayoutMode: TopScrolling;
          Anchor: (Full: 0);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;
        Visible: false;

        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "Basic Lighting"; Padding: (Bottom: 8); }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Number of light updates processed per batch. Higher = faster lighting but more CPU spikes (1-32)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Batch Size"; Anchor: (Width: 200); }
          SliderNumberField #LightingBatchSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 1; Max: 32; }
        }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Maximum distance for light propagation calculations in chunks (2-16)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Max Distance"; Anchor: (Width: 200); }
          SliderNumberField #LightingDistanceSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 2; Max: 16; }
        }

        // Advanced Lighting
        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "Advanced Lighting"; Padding: (Top: 16, Bottom: 8); }

        Group #LightPropOptToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Optimizes light spread calculations using directional propagation";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Light Propagation Opt"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }

        Group #OpacityCacheToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Caches block opacity values to reduce repeated lookups";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Opacity Lookup Cache"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }

        Group #FlatCacheToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Uses flat array cache for light data instead of nested structures";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Flat Light Data Cache"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }

        Group #QueueOptToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Optimizes light update queue processing order";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Queue Processing Opt"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }

        Group #PackedOpsToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Uses packed integer operations for light level calculations";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Packed Light Operations"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }

        Group #SkipEmptyToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Skips lighting calculations for empty chunk sections";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Skip Empty Sections"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }
        }

        // ===== PATHFINDING TAB =====
        Group #PanelPathfinding {
          LayoutMode: TopScrolling;
          Anchor: (Full: 0);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;
        Visible: false;

        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "NPC Pathfinding"; Padding: (Bottom: 8); }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Maximum nodes in a path. Lower = faster but shorter paths (50-500)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Max Path Length"; Anchor: (Width: 200); }
          SliderNumberField #MaxPathLengthSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 50; Max: 500; }
        }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Max nodes to explore simultaneously. Lower = less memory usage (20-200)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Open Nodes Limit"; Anchor: (Width: 200); }
          SliderNumberField #OpenNodesSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 20; Max: 200; }
        }

        Group { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Total nodes allowed in pathfinding. Lower = faster but may fail on complex paths (100-1000)";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Total Nodes Limit"; Anchor: (Width: 200); }
          SliderNumberField #TotalNodesSlider { Anchor: (Width: 250, Height: 5); SliderStyle: $C.@DefaultSliderStyle; NumberFieldStyle: $C.@DefaultInputFieldStyle; Min: 100; Max: 1000; }
        }
        }

        // ===== VISUAL TAB =====
        Group #PanelVisual {
          LayoutMode: TopScrolling;
          Anchor: (Full: 0);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;
        Visible: false;

        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "Visual Effects"; Padding: (Bottom: 8); }

        Group #ParticlesToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Enable or disable particle effects for better performance";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "Particle Effects"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }

        Group #AnimationsToggle { Anchor: (Height: 44, Bottom: 4); Background: #1a1d26; LayoutMode: Left; Padding: (Left: 16, Right: 16); TooltipText: "Enable or disable NPC animations for better performance";
          Label { Style: (VerticalAlignment: Center, TextColor: #96a9be, FontSize: 15); Text: "NPC Animations"; FlexWeight: 1; }
          CheckBox #CheckBox { Anchor: (Width: 24, Height: 24); Style: $C.@DefaultCheckBoxStyle; }
        }
        }

        // ===== ADVANCED TAB =====
        Group #PanelAdvanced {
          LayoutMode: TopScrolling;
          Anchor: (Full: 0);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;
        Visible: false;

        Label { Style: (FontSize: 14, TextColor: #55aaff, RenderBold: true, RenderUppercase: true); Text: "Debug Info"; Padding: (Bottom: 8); }

        Group { Anchor: (Height: 60, Bottom: 8); Background: #1a1d26; LayoutMode: Top; Padding: (Full: 16); TooltipText: "Current version of the Catalyst optimization mod";
          Label { Style: (TextColor: #96a9be, FontSize: 14, RenderBold: true); Text: "Catalyst Version"; }
          Label #VersionLabel { Style: (TextColor: #6e7da1, FontSize: 13); Text: "1.0.0"; }
        }

        Group { Anchor: (Height: 60, Bottom: 8); Background: #1a1d26; LayoutMode: Top; Padding: (Full: 16); TooltipText: "Number of bytecode transformers currently active";
          Label { Style: (TextColor: #96a9be, FontSize: 14, RenderBold: true); Text: "Active Transformers"; }
          Label #TransformersLabel { Style: (TextColor: #6e7da1, FontSize: 13); Text: "20 loaded"; }
        }
        }
      }

      // ===== BOTTOM BUTTONS =====
      Group {
        LayoutMode: Center;
        Anchor: (Height: 50);
        Padding: (Top: 8);

        $C.@SecondaryTextButton #ResetButton {
          @Text = "Reset to Defaults";
          @Anchor = (MinWidth: 180);
          TooltipText: "Reset all settings to their default values";
        }
      }
    }
  }

  $C.@BackButton {}
}
